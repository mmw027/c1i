<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>6 · Memory + Distance</title>
<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:linear-gradient(to bottom,#d4a373 0%,#e8c4a0 50%,#f5e6d3 100%);
}

/* tunnel container */
.tunnel{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:500px;
  height:500px;
  perspective:1000px;
}

/* portal rings */
.ring{
  position:absolute;
  border:3px solid rgba(255,255,255,0.3);
  border-radius:50%;
  animation:pulseRing 4s ease-in-out infinite;
}

.ring1{
  width:500px;
  height:500px;
  top:0;
  left:0;
  animation-delay:0s;
}
.ring2{
  width:400px;
  height:400px;
  top:50px;
  left:50px;
  animation-delay:0.5s;
}
.ring3{
  width:300px;
  height:300px;
  top:100px;
  left:100px;
  animation-delay:1s;
}
.ring4{
  width:200px;
  height:200px;
  top:150px;
  left:150px;
  animation-delay:1.5s;
}

@keyframes pulseRing{
  0%,100%{opacity:0.3;transform:scale(1);}
  50%{opacity:0.7;transform:scale(1.05);}
}

/* portal sides */
.portalSide{
  position:absolute;
  width:180px;
  height:180px;
  border-radius:50%;
  backdrop-filter:blur(20px);
  box-shadow:0 10px 40px rgba(0,0,0,0.2);
  cursor:pointer;
  transition:all 0.5s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  font-family:'Inter',sans-serif;
  border:4px solid rgba(255,255,255,0.4);
}

.portalSide:hover{
  transform:scale(1.15);
  box-shadow:0 15px 60px rgba(0,0,0,0.3);
}

.portalSide.active{
  transform:scale(1.3);
  z-index:10;
}

.taiwan{
  top:80px;
  left:80px;
  background:rgba(255,180,120,0.4);
}

.newyork{
  bottom:80px;
  right:80px;
  background:rgba(150,180,220,0.4);
}

.portalLabel{
  font-size:1.1rem;
  font-weight:500;
  letter-spacing:2px;
  color:rgba(80,60,50,0.9);
  margin-bottom:8px;
}

.portalSubtext{
  font-size:0.75rem;
  opacity:0.7;
  letter-spacing:1px;
}

/* connection beam */
.beam{
  position:absolute;
  top:50%;
  left:50%;
  width:4px;
  height:0;
  background:linear-gradient(to bottom,rgba(255,180,120,0.6),rgba(150,180,220,0.6));
  transform:translate(-50%,-50%) rotate(45deg);
  transform-origin:center;
  transition:height 0.8s ease;
  box-shadow:0 0 20px rgba(255,200,150,0.5);
}

.beam.active{
  height:400px;
}

/* airplane */
.airplane{
  position:absolute;
  font-size:32px;
  transform:rotate(-45deg);
  opacity:0;
  transition:opacity 0.5s ease;
  filter:drop-shadow(0 3px 10px rgba(0,0,0,0.3));
  z-index:15;
  pointer-events:none;
}

.airplane.flying{
  opacity:1;
  animation:flyTunnel 8s linear infinite;
}

@keyframes flyTunnel{
  0%{
    left:calc(80px + 90px);
    top:calc(80px + 90px);
    transform:rotate(-45deg) scale(0.5);
  }
  50%{
    left:50%;
    top:50%;
    transform:rotate(-45deg) scale(1);
  }
  100%{
    left:calc(100% - 80px - 90px);
    top:calc(100% - 80px - 90px);
    transform:rotate(-45deg) scale(0.5);
  }
}

/* floating particles through tunnel */
.tunnelParticle{
  position:absolute;
  width:8px;
  height:8px;
  background:rgba(255,200,150,0.7);
  border-radius:50%;
  animation:floatThrough 6s linear infinite;
  box-shadow:0 0 15px rgba(255,200,150,0.6);
}

@keyframes floatThrough{
  0%{
    left:calc(80px + 90px);
    top:calc(80px + 90px);
    opacity:0;
    transform:scale(0.5);
  }
  50%{
    left:50%;
    top:50%;
    opacity:1;
    transform:scale(1);
  }
  100%{
    left:calc(100% - 80px - 90px);
    top:calc(100% - 80px - 90px);
    opacity:0;
    transform:scale(0.5);
  }
}

/* memory fragments */
.memoryFragment{
  position:absolute;
  padding:8px 14px;
  background:rgba(255,255,255,0.5);
  border-radius:20px;
  font-family:'Inter',sans-serif;
  font-size:0.8rem;
  color:rgba(80,60,50,0.8);
  backdrop-filter:blur(10px);
  box-shadow:0 4px 15px rgba(0,0,0,0.1);
  opacity:0;
  transition:opacity 0.5s ease;
  pointer-events:none;
  letter-spacing:0.5px;
}

.memoryFragment.visible{
  opacity:1;
}

.m1{top:20%;left:15%;}
.m2{top:25%;right:18%;}
.m3{bottom:22%;left:18%;}
.m4{bottom:18%;right:15%;}

/* distance counter */
.distance{
  position:absolute;
  bottom:100px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  color:rgba(100,60,40,0.7);
  font-family:'Inter',sans-serif;
  font-size:1rem;
  font-weight:400;
  letter-spacing:2px;
}

/* instruction */
.instruction{
  position:absolute;
  top:15%;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  color:rgba(100,60,40,0.7);
  font-family:'Inter',sans-serif;
  font-size:1rem;
  font-weight:300;
  letter-spacing:2px;
  pointer-events:none;
  transition:opacity 2s ease;
}
.instruction.hidden{opacity:0;}
.subtitle{
  font-size:0.75rem;
  margin-top:8px;
  opacity:0.7;
}

/* nav */
.nav{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:25px;
  z-index:100;
}
.nav a{
  text-decoration:none;
  padding:10px 16px;
  border-radius:20px;
  background:rgba(255,255,255,0.6);
  color:#333;
  font-family:'Inter',sans-serif;
  font-size:.9rem;
  transition:.3s;
  backdrop-filter:blur(10px);
}
.nav a:hover{background:rgba(255,255,255,0.9);}
</style>
</head>
<body>
<div class="tunnel">
  <div class="ring ring1"></div>
  <div class="ring ring2"></div>
  <div class="ring ring3"></div>
  <div class="ring ring4"></div>
  
  <div class="beam" id="beam"></div>
  <div class="airplane" id="airplane">✈️</div>
  
  <div class="portalSide taiwan" data-side="taiwan">
    <div class="portalLabel">TAIWAN</div>
    <div class="portalSubtext">home</div>
  </div>
  
  <div class="portalSide newyork" data-side="newyork">
    <div class="portalLabel">NEW YORK</div>
    <div class="portalSubtext">here</div>
  </div>
</div>

<div class="memoryFragment m1">night market sounds</div>
<div class="memoryFragment m2">grandma's smile</div>
<div class="memoryFragment m3">smell of home</div>
<div class="memoryFragment m4">missing home</div>

<div class="distance">7,783 miles between</div>

<div class="instruction" id="instruction">
  Click portals to connect
  <div class="subtitle">nostalgia, distance, connection</div>
</div>

<div class="nav">
  <a href="entry5.html">← Back</a>
  <a href="entry7.html">Next →</a>
</div>

<script>
const beam = document.getElementById('beam');
const airplane = document.getElementById('airplane');
const portals = document.querySelectorAll('.portalSide');
const memories = document.querySelectorAll('.memoryFragment');
let activePortal = null;
let particleInterval;

const memoryTexts = {
  taiwan: [
    'night market sounds',
    'grandma\'s hands',
    'road back home',
    'childhood streets'
  ],
  newyork: [
    'subway echoes',
    'missing home',
    'foreign moon',
    'days of effort'
  ]
};

portals.forEach(portal => {
  portal.addEventListener('click', () => {
    const side = portal.dataset.side;
    
    if (activePortal === portal) {
      // Deactivate
      portal.classList.remove('active');
      beam.classList.remove('active');
      airplane.classList.remove('flying');
      stopParticles();
      hideMemories();
      activePortal = null;
    } else {
      // Activate
      portals.forEach(p => p.classList.remove('active'));
      portal.classList.add('active');
      beam.classList.add('active');
      airplane.classList.add('flying');
      activePortal = portal;
      
      // Show memories
      showMemories(side);
      
      // Start particles
      startParticles();
    }
    
    hideInstruction();
  });
});

function startParticles() {
  stopParticles();
  
  particleInterval = setInterval(() => {
    const particle = document.createElement('div');
    particle.className = 'tunnelParticle';
    particle.style.animationDuration = (4 + Math.random() * 4) + 's';
    particle.style.animationDelay = Math.random() * 2 + 's';
    document.querySelector('.tunnel').appendChild(particle);
    
    setTimeout(() => particle.remove(), 8000);
  }, 800);
}

function stopParticles() {
  if (particleInterval) {
    clearInterval(particleInterval);
    particleInterval = null;
  }
}

function showMemories(side) {
  const texts = memoryTexts[side];
  memories.forEach((memory, i) => {
    memory.textContent = texts[i];
    setTimeout(() => {
      memory.classList.add('visible');
    }, i * 200);
  });
}

function hideMemories() {
  memories.forEach(memory => {
    memory.classList.remove('visible');
  });
}

function hideInstruction() {
  const instruction = document.getElementById('instruction');
  setTimeout(() => {
    instruction.classList.add('hidden');
  }, 500);
}
</script>
</body>
</html>