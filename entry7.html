<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>7 · Weather Harmonics</title>
<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:linear-gradient(to bottom,#d4d9e0 0%,#c8cdd6 50%,#b8c0cc 100%);
  transition:background 2s ease;
}

/* fog particles */
.fogParticle{
  position:absolute;
  background:rgba(255,255,255,0.3);
  border-radius:50%;
  pointer-events:none;
  animation:fogDrift 20s linear infinite;
}
@keyframes fogDrift{
  0%{transform:translate(0,0);opacity:0;}
  10%{opacity:0.6;}
  90%{opacity:0.6;}
  100%{transform:translate(400px,150px);opacity:0;}
}

/* wind lines */
.windLine{
  position:absolute;
  height:2px;
  background:rgba(255,255,255,0.4);
  pointer-events:none;
  animation:windBlow 3s linear infinite;
}
@keyframes windBlow{
  0%{left:-300px;opacity:0;}
  10%{opacity:0.7;}
  90%{opacity:0.7;}
  100%{left:110%;opacity:0;}
}

/* rain drops */
.rainDrop{
  position:absolute;
  width:2px;
  height:30px;
  background:linear-gradient(to bottom,rgba(255,255,255,0.5),transparent);
  pointer-events:none;
  animation:rainFall 1.5s linear infinite;
}
@keyframes rainFall{
  0%{top:-40px;opacity:1;}
  100%{top:100%;opacity:0.2;}
}

/* sunset glow */
.sunsetGlow{
  position:absolute;
  border-radius:50%;
  pointer-events:none;
  animation:glowPulse 5s ease-in-out infinite;
}
@keyframes glowPulse{
  0%,100%{transform:scale(1);opacity:0.6;}
  50%{transform:scale(1.3);opacity:0.9;}
}

/* weather indicator */
.weatherName{
  position:absolute;
  top:60px;
  left:50%;
  transform:translateX(-50%);
  color:rgba(255,255,255,0.8);
  font-family:'Inter',sans-serif;
  font-size:1.2rem;
  font-weight:300;
  letter-spacing:4px;
  text-shadow:0 2px 15px rgba(0,0,0,0.2);
  transition:opacity 0.5s ease;
}

/* color palette */
.palette{
  position:absolute;
  bottom:80px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:20px;
}
.colorSwatch{
  width:70px;
  height:70px;
  border-radius:50%;
  border:3px solid rgba(255,255,255,0.4);
  transition:all 1s ease;
  box-shadow:0 6px 25px rgba(0,0,0,0.2);
}

/* instruction */
.instruction{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  color:rgba(255,255,255,0.85);
  font-family:'Inter',sans-serif;
  font-size:1rem;
  font-weight:300;
  letter-spacing:3px;
  pointer-events:none;
  transition:opacity 2s ease;
  text-shadow:0 2px 15px rgba(0,0,0,0.3);
}
.instruction.hidden{opacity:0;}
.subtitle{
  font-size:0.75rem;
  margin-top:12px;
  opacity:0.8;
  letter-spacing:2px;
}

/* nav */
.nav{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:25px;
  z-index:100;
}
.nav a{
  text-decoration:none;
  padding:10px 16px;
  border-radius:20px;
  background:rgba(255,255,255,0.6);
  color:#333;
  font-family:'Inter',sans-serif;
  font-size:.9rem;
  transition:.3s;
  backdrop-filter:blur(10px);
}
.nav a:hover{background:rgba(255,255,255,0.9);}
</style>
</head>
<body>
<div class="weatherName" id="weatherName">FOG</div>

<div class="palette" id="palette">
  <div class="colorSwatch" style="background:#d4d9e0;"></div>
  <div class="colorSwatch" style="background:#c8cdd6;"></div>
  <div class="colorSwatch" style="background:#b8c0cc;"></div>
</div>

<div class="instruction" id="instruction">
  Press 1 · 2 · 3 · 4 to change weather
  <div class="subtitle">how atmosphere shifts your inner landscape</div>
</div>

<div class="nav">
  <a href="entry6.html">← Back</a>
  <a href="entry8.html">Next →</a>
</div>

<script>
const body = document.body;
const weatherName = document.getElementById('weatherName');
const palette = document.getElementById('palette');

const weathers = [
  {
    name: 'FOG',
    bg: 'linear-gradient(to bottom,#d4d9e0 0%,#c8cdd6 50%,#b8c0cc 100%)',
    colors: ['#d4d9e0', '#c8cdd6', '#b8c0cc'],
    effect: 'fog'
  },
  {
    name: 'WIND',
    bg: 'linear-gradient(to bottom,#b8d4e0 0%,#a0bfd0 50%,#88aac0 100%)',
    colors: ['#b8d4e0', '#a0bfd0', '#88aac0'],
    effect: 'wind'
  },
  {
    name: 'SUNSET',
    bg: 'linear-gradient(to bottom,#ffb88c 0%,#ffa06e 50%,#ff8850 100%)',
    colors: ['#ffb88c', '#ffa06e', '#ff8850'],
    effect: 'sunset'
  },
  {
    name: 'RAIN',
    bg: 'linear-gradient(to bottom,#8a9aa8 0%,#6b7c8c 50%,#4d5e70 100%)',
    colors: ['#8a9aa8', '#6b7c8c', '#4d5e70'],
    effect: 'rain'
  }
];

let currentWeather = 0;
let activeEffects = [];

// Keyboard controls
document.addEventListener('keydown', (e) => {
  const key = e.key;
  if (key >= '1' && key <= '4') {
    currentWeather = parseInt(key) - 1;
    changeWeather(currentWeather);
    hideInstruction();
  }
});

function changeWeather(index) {
  const weather = weathers[index];
  
  // Update background
  body.style.background = weather.bg;
  
  // Update weather name
  weatherName.textContent = weather.name;
  
  // Update color palette
  const swatches = palette.querySelectorAll('.colorSwatch');
  swatches.forEach((swatch, i) => {
    swatch.style.background = weather.colors[i];
  });
  
  // Clear previous effects
  clearEffects();
  
  // Create weather effect
  createWeatherEffect(weather.effect);
}

function createWeatherEffect(type) {
  if (type === 'fog') {
    for (let i = 0; i < 50; i++) {
      setTimeout(() => {
        const particle = document.createElement('div');
        particle.className = 'fogParticle';
        particle.style.width = (100 + Math.random() * 200) + 'px';
        particle.style.height = (100 + Math.random() * 200) + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 8 + 's';
        particle.style.animationDuration = (15 + Math.random() * 15) + 's';
        document.body.appendChild(particle);
        activeEffects.push(particle);
      }, i * 100);
    }
  } else if (type === 'wind') {
    const interval = setInterval(() => {
      const line = document.createElement('div');
      line.className = 'windLine';
      line.style.width = (200 + Math.random() * 400) + 'px';
      line.style.top = Math.random() * 100 + '%';
      line.style.animationDuration = (2 + Math.random() * 2) + 's';
      document.body.appendChild(line);
      
      setTimeout(() => line.remove(), 3000);
    }, 150);
    activeEffects.push({ clear: () => clearInterval(interval) });
  } else if (type === 'sunset') {
    for (let i = 0; i < 5; i++) {
      const glow = document.createElement('div');
      glow.className = 'sunsetGlow';
      const size = 250 + Math.random() * 300;
      glow.style.width = size + 'px';
      glow.style.height = size + 'px';
      glow.style.background = `radial-gradient(circle, rgba(255,${180 + Math.random() * 50},${100 + Math.random() * 50},0.5) 0%, transparent 70%)`;
      glow.style.left = (20 + Math.random() * 60) + '%';
      glow.style.bottom = (10 + Math.random() * 40) + '%';
      glow.style.animationDelay = i * 1 + 's';
      document.body.appendChild(glow);
      activeEffects.push(glow);
    }
  } else if (type === 'rain') {
    const interval = setInterval(() => {
      const drop = document.createElement('div');
      drop.className = 'rainDrop';
      drop.style.left = Math.random() * 100 + '%';
      drop.style.animationDuration = (1 + Math.random() * 0.8) + 's';
      document.body.appendChild(drop);
      
      setTimeout(() => drop.remove(), 1500);
    }, 40);
    activeEffects.push({ clear: () => clearInterval(interval) });
  }
}

function clearEffects() {
  activeEffects.forEach(effect => {
    if (effect.clear) {
      effect.clear();
    } else {
      effect.remove();
    }
  });
  activeEffects = [];
}

function hideInstruction() {
  const instruction = document.getElementById('instruction');
  setTimeout(() => {
    instruction.classList.add('hidden');
  }, 500);
}

// Initialize with fog
changeWeather(0);
</script>
</body>
</html>