<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>2 ¬∑ Everyday Movements</title>
<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:linear-gradient(to bottom,#2d2a4a 0%,#7e8ba3 50%,#c8d5e0 100%);
  background-size:100% 200%;
  animation:cityShift 25s ease-in-out infinite alternate;
}

@keyframes cityShift{
  0%{background-position:0 0%;}
  100%{background-position:0 100%;}
}

/* city silhouette */
.buildings{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:40%;
  display:flex;
  align-items:flex-end;
  gap:2px;
  filter:blur(1px);
}
.building{
  background:rgba(30,30,50,0.7);
  transition:all 0.5s ease;
  cursor:pointer;
}
.building:hover{
  background:rgba(50,50,80,0.9);
  transform:scaleY(1.05);
}
.b1{width:8%;height:60%;}
.b2{width:12%;height:45%;}
.b3{width:7%;height:70%;}
.b4{width:10%;height:55%;}
.b5{width:9%;height:80%;}
.b6{width:11%;height:50%;}
.b7{width:8%;height:65%;}
.b8{width:13%;height:48%;}
.b9{width:10%;height:75%;}

/* window lights */
.windowLight{
  position:absolute;
  width:8px;
  height:10px;
  background:rgba(255,220,150,0.8);
  border-radius:1px;
  opacity:0;
  transition:opacity 0.3s ease;
}
.windowLight.on{
  opacity:1;
  box-shadow:0 0 8px rgba(255,220,150,0.6);
}

/* shadows moving across */
.shadow{
  position:absolute;
  bottom:0;
  width:80px;
  height:120px;
  background:linear-gradient(to top,rgba(20,20,40,0.4) 0%,transparent 100%);
  border-radius:50% 50% 0 0;
  animation-play-state:paused;
  cursor:pointer;
  transition:background 0.3s ease;
}
.shadow:hover{
  background:linear-gradient(to top,rgba(40,40,70,0.6) 0%,transparent 100%);
}
.shadow1{left:-100px;animation:walk1 8s linear infinite;}
.shadow2{right:-100px;animation:walk2 10s linear infinite;}
.shadow3{left:20%;animation:walk3 12s linear infinite;}

@keyframes walk1{
  0%{left:-100px;transform:scaleX(1);}
  100%{left:110%;transform:scaleX(1);}
}
@keyframes walk2{
  0%{right:-100px;transform:scaleX(-1);}
  100%{right:110%;transform:scaleX(-1);}
}
@keyframes walk3{
  0%{left:20%;opacity:0.3;}
  50%{opacity:0.6;}
  100%{left:90%;opacity:0.3;}
}

/* footsteps */
.footstep{
  position:absolute;
  width:12px;
  height:20px;
  background:rgba(255,255,255,0.3);
  border-radius:40% 40% 60% 60%;
  animation:fadeStep 2s ease-out forwards;
  pointer-events:none;
}
@keyframes fadeStep{
  0%{opacity:0.8;transform:scale(1);}
  100%{opacity:0;transform:scale(0.5);}
}

/* sound waves */
.soundWave{
  position:absolute;
  border:2px solid rgba(255,255,255,0.4);
  border-radius:50%;
  animation:waveExpand 1.5s ease-out forwards;
  pointer-events:none;
}
@keyframes waveExpand{
  0%{width:0;height:0;opacity:0.8;}
  100%{width:150px;height:150px;opacity:0;}
}

/* rhythm particles */
.rhythmParticle{
  position:absolute;
  width:6px;
  height:6px;
  background:rgba(255,255,255,0.6);
  border-radius:50%;
  animation:rhythmFloat 2s ease-out forwards;
  pointer-events:none;
}
@keyframes rhythmFloat{
  0%{opacity:1;transform:translateY(0) scale(1);}
  100%{opacity:0;transform:translateY(-150px) scale(0.3);}
}

/* ambient */
.ambient{
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 50% 30%,rgba(255,255,220,0.1) 0%,transparent 60%);
  animation:ambientPulse 15s ease-in-out infinite alternate;
  pointer-events:none;
}
@keyframes ambientPulse{
  from{opacity:0.3;}to{opacity:0.7;}
}

/* instruction */
.instruction{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
  color:rgba(255,255,255,0.7);
  font-family:'Inter',sans-serif;
  font-size:1.1rem;
  font-weight:300;
  letter-spacing:1px;
  pointer-events:none;
  transition:opacity 0.5s;
}
.instruction.hidden{opacity:0;}
.subtitle{
  font-size:0.85rem;
  margin-top:8px;
  opacity:0.6;
}

/* nav */
.nav{
  position:fixed;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:25px;
  z-index:100;
}
.nav a{
  text-decoration:none;
  padding:10px 16px;
  border-radius:20px;
  background:rgba(255,255,255,0.6);
  color:#333;
  font-family:'Inter',sans-serif;
  font-size:.9rem;
  transition:.3s;
  backdrop-filter:blur(10px);
}
.nav a:hover{background:rgba(255,255,255,0.9);}

body.playing .shadow{
  animation-play-state:running;
}
</style>
</head>

<body>

<!-- Piano sounds -->
<audio id="sound-do" src="do-80236.mp3"></audio>
<audio id="sound-re" src="re-78500.mp3"></audio>
<audio id="sound-fa" src="fa-78409.mp3"></audio>

<div class="buildings" id="buildings">
  <div class="building b1" data-building="1"></div>
  <div class="building b2" data-building="2"></div>
  <div class="building b3" data-building="3"></div>
  <div class="building b4" data-building="4"></div>
  <div class="building b5" data-building="5"></div>
  <div class="building b6" data-building="6"></div>
  <div class="building b7" data-building="7"></div>
  <div class="building b8" data-building="8"></div>
  <div class="building b9" data-building="9"></div>
</div>

<div class="shadow shadow1"></div>
<div class="shadow shadow2"></div>
<div class="shadow shadow3"></div>

<div class="ambient"></div>

<div class="instruction" id="instruction">
  SPACE to animate ¬∑ CLICK ground to walk ¬∑ CLICK buildings/shadows for sounds
  <div class="subtitle">harmony hidden in ordinary moments</div>
</div>

<div class="nav">
  <a href="entry1.html">‚Üê Back</a>
  <a href="entry3.html">Next ‚Üí</a>
</div>

<script>
let instructionTimer;

// Add windows
function addWindowsToBuilding(building) {
  const rect = building.getBoundingClientRect();
  const cols = Math.floor(rect.width / 15);
  const rows = Math.floor(rect.height / 20);

  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
      if (Math.random() > 0.4) {
        const window = document.createElement('div');
        window.className = 'windowLight';
        window.style.left = (c * 15 + 4) + 'px';
        window.style.top = (r * 20 + 5) + 'px';
        building.appendChild(window);
      }
    }
  }
}

document.querySelectorAll('.building').forEach(addWindowsToBuilding);

/* üîî Piano sound mapping */
function playPianoSound(n) {
  let id = n <= 3 ? "sound-do" : n <= 6 ? "sound-re" : "sound-fa";
  const audio = document.getElementById(id);
  audio.currentTime = 0;
  audio.play();
}

/* Building click */
document.querySelectorAll('.building').forEach(building => {
  building.addEventListener('click', (e) => {
    e.stopPropagation();

    const windows = building.querySelectorAll('.windowLight');
    windows.forEach(w => w.classList.toggle('on'));

    const num = parseInt(building.dataset.building);
    playPianoSound(num);

    createRhythmParticles(e.clientX, e.clientY);
    hideInstruction();
  });
});

/* Shadow click sound waves */
document.querySelectorAll('.shadow').forEach(shadow => {
  shadow.addEventListener('click', (e) => {
    e.stopPropagation();
    createSoundWave(e.clientX, e.clientY);
    hideInstruction();
  });
});

/* Space = animate shadows */
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space') {
    e.preventDefault();
    document.body.classList.toggle('playing');
    hideInstruction();
  }
});

/* Ground click footsteps */
document.addEventListener('click', (e) => {
  if (!e.target.classList.contains('building') && 
      !e.target.classList.contains('shadow') &&
      e.target.tagName !== 'A') {
    createFootstep(e.clientX, e.clientY);
    hideInstruction();
  }
});

function createFootstep(x, y) {
  const step = document.createElement('div');
  step.className = 'footstep';
  step.style.left = x + 'px';
  step.style.top = y + 'px';
  step.style.transform = `rotate(${Math.random() * 30 - 15}deg)`;
  document.body.appendChild(step);
  setTimeout(() => step.remove(), 2000);
}

function createSoundWave(x, y) {
  const wave = document.createElement('div');
  wave.className = 'soundWave';
  wave.style.left = (x - 75) + 'px';
  wave.style.top = (y - 75) + 'px';
  document.body.appendChild(wave);
  setTimeout(() => wave.remove(), 1500);
}

function createRhythmParticles(x, y) {
  for (let i = 0; i < 5; i++) {
    setTimeout(() => {
      const p = document.createElement('div');
      p.className = 'rhythmParticle';
      p.style.left = (x + Math.random() * 40 - 20) + 'px';
      p.style.top = (y + Math.random() * 40 - 20) + 'px';
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 2000);
    }, i * 100);
  }
}

function hideInstruction() {
  const inst = document.getElementById('instruction');
  inst.classList.add('hidden');
  clearTimeout(instructionTimer);
  instructionTimer = setTimeout(() => inst.classList.remove('hidden'), 5000);
}
</script>
</body>
</html>
