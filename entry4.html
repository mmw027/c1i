<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>4 · Rain on Glass</title>
<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:radial-gradient(circle at center,#0a0f26 0%,#1b284b 50%,#263a63 100%);
  font-family:'Inter',sans-serif;
}

/* soft background glow */
.glow{
  position:absolute;
  width:120%;
  height:120%;
  left:-10%;top:-10%;
  background:radial-gradient(circle at 60% 40%,rgba(255,204,140,0.3),transparent 70%);
  filter:blur(80px);
  animation:glowShift 12s ease-in-out infinite alternate;
}
@keyframes glowShift{
  0%{transform:translate(0,0);}
  100%{transform:translate(-10px,10px);}
}

/* fog overlay */
#fog{
  position:absolute;
  inset:0;
  backdrop-filter:blur(30px) brightness(1.2);
  background:rgba(255,255,255,0.08);
  transition:clip-path 0.3s ease;
  z-index:5;
}

/* lightning flash */
.flash{
  position:absolute;
  inset:0;
  background:rgba(255,255,255,0.9);
  opacity:0;
  pointer-events:none;
  transition:opacity 0.15s ease;
  z-index:6;
}

/* raindrop style */
.drop{
  position:absolute;
  width:2px;
  height:25px;
  background:rgba(255,255,255,0.25);
  filter:blur(0.4px);
  animation:fall linear infinite;
}
@keyframes fall{
  0%{transform:translateY(-10vh);}
  100%{transform:translateY(110vh);}
}

/* navigation */
.nav{
  position:fixed;
  bottom:25px;left:50%;
  transform:translateX(-50%);
  display:flex;gap:25px;z-index:20;
}
.nav a{
  text-decoration:none;
  padding:10px 16px;
  border-radius:20px;
  background:rgba(255,255,255,0.6);
  color:#333;
  font-size:.9rem;
  transition:.3s;
  backdrop-filter:blur(10px);
}
.nav a:hover{background:rgba(255,255,255,0.9);}
</style>
</head>
<body>

<div class="glow"></div>
<div id="fog"></div>
<div class="flash"></div>

<div class="nav">
  <a href="entry3.html">← Prev</a>
  <a href="index.html">Back to Index</a>
  <a href="entry5.html">Next →</a>
</div>

<script>
let rainActive=true;
const fog=document.getElementById('fog');
const flash=document.querySelector('.flash');

// --- Create raindrops ---
let drops=[];
function makeRain(){
  for(let i=0;i<160;i++){
    const d=document.createElement('div');
    d.className='drop';
    d.style.left=Math.random()*100+'%';
    d.style.animationDuration=0.7+Math.random()*0.8+'s';
    d.style.animationDelay=Math.random()*4+'s';
    document.body.appendChild(d);
    drops.push(d);
  }
}
makeRain();

// --- Lightning ---
function lightning(){
  if(!rainActive) return;
  flash.style.opacity='1';
  setTimeout(()=>flash.style.opacity='0',120);
}
setInterval(lightning,Math.random()*8000+6000);

// --- Fog clearing effect ---
let timer;
document.addEventListener('mousemove',e=>{
  fog.style.clipPath=`circle(150px at ${e.clientX}px ${e.clientY}px)`;
  clearTimeout(timer);
  timer=setTimeout(()=>{
    fog.style.clipPath='circle(0 at 50% 50%)';
  },1800);
});

// --- Click to toggle rain ---
document.addEventListener('click',()=>{
  rainActive=!rainActive;

  if(!rainActive){
    // Stop rain: fade and freeze drops
    drops.forEach(d=>{
      d.style.animationPlayState='paused';
      d.style.opacity='0';
    });
  }else{
    // Resume rain: fade back in
    drops.forEach(d=>{
      d.style.animationPlayState='running';
      d.style.opacity='1';
    });
  }
});
</script>

</body>
</html>
